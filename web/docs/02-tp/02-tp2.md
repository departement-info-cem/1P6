# 🧪 TP2 – Mini-système d’inventaire en C#

---

## Étape 1 — Résumé du projet (vue d’ensemble)

🎯 **Objectif du TP2** :  
Bâtir, en console C#, un mini-système d’inventaire pour un personnage.

Le système doit inclure :

- 👤 **Un personnage** avec minimum :
  - un **nom**
  - une **force** (force = poids maximal transportable)
- 🛠️ **Une liste d’équipement** (description, prix, poids, effet)
- 🎒 **Un sac à dos** de taille fixe contenant des indices vers la liste d’équipement
- 📜 **Un menu interactif** qui permet :
  - d’acheter des items  
  - d’ajouter des items au sac  
  - tout en respectant **la bourse** et **la limite de poids**

---

## 🔹 Progression

On progresse pas à pas :

1. Initialiser le personnage
2. Définir les constantes et la liste d’équipement
3. Implémenter les petites fonctions (*getters*)  
4. Gérer le sac à dos  
5. Ajouter des items au sac  
6. Implémenter l’achat  
7. Construire le menu final  

---

## Étape 1 — Personnage

### 1️⃣ Déclarer les variables globales

```csharp
static string gNomPersonnage = "";
static int gForce = 10;
static int gBourse = 20;
```

---

### 2️⃣ Dans Main

Appeler la fonction `InitialiserPersonnage()` :

```csharp
static void Main(string[] args)
{
    InitialiserPersonnage();
}
```

---

### 3️⃣ Fonction InitialiserPersonnage

Crée la fonction `InitialiserPersonnage` :

```csharp
static void InitialiserPersonnage()
{
    // Ici on a le choix :
    // 1. On peut utiliser un générateur déjà fait
    // 2. ou on peut réutiliser notre code fait au TP1

    // Pour ce TP il suffit d'avoir une variable 'gNomPersonnage' et une variable 'force' 
    CreateurPersonnage.CreerPersonnage(out gNomPersonnage, out gForce);
    // déjà fourni pour que tous les étudiants aient un point de départ
}
```

---

### 4️⃣ Fonction Tests

Crée une fonction `Tests` que tu utiliseras pour vérifier chaque nouvelle fonction que tu créeras.

```csharp
static void Tests()
{
    Console.WriteLine($"Nom : {gNomPersonnage}");
    Console.WriteLine($"Force : {gForce}");
    Console.WriteLine($"Bourse : {gBourse} po");
}
```

Appelle-la aussi dans `Main` :

```csharp
static void Main(string[] args)
{
    InitialiserPersonnage();
    Tests();
}
```



### ✅ **Résultat attendu**  
Ton programme affiche le personnage généré avec son nom, sa force et sa bourse de départ.


## Étape 2 — Définir les constantes et la liste d’équipement

### 1️⃣ Constantes

On commence par définir des constantes pour représenter :  

- **Valeurs invalides** (quand un prix ou un poids n’existe pas)  
- **Colonnes de la liste d’équipement** (pour extraire description, prix, poids, effet)

```csharp
const int INVALIDE = -1;               // prix ou poids invalide
const string DESC_INVALIDE = "INVALIDE"; // description invalide

const int EQUIP_DESC = 0;  // Exemple : "Épée"
const int EQUIP_PRIX = 1;  // Exemple : 5 po
const int EQUIP_POIDS = 2; // Exemple : 2,5 Kg
const int EQUIP_EFFET = 3; // Exemple : "Attaque +3", "Points de vie +5"
```

---

### 2️⃣ Liste d’équipement

On crée un tableau de chaînes de caractères (`string[]`).  
Chaque item est représenté par une ligne avec le format suivant :

```
"Nom;Prix;Poids;Effet"
```

Exemple enrichi avec des **emojis Windows** 🎉 :

```csharp
// 👇 Liste d'équipement enrichie + emojis Windows
static string[] gListeEquipement = {
    "⚔  Épée;5; 6,5 ;Attaque +3",
    "🧪 Potion de vie;4; 0,5 ;Points de vie +5",
    "🥖 Ration;2;4,2;Points de vie +4",
    "🛡 Bouclier en bois;6;7,0;Dégâts -2",
    "🎯 Arc court;7;2,0;Initiative",
    "🏹 Carquois;3;1,0;-",
    "🔦 Torche;1;0,4;Annule pénalité de pénombre",
    "🧥 Cape magique;3;1,2;Esquive 25%",
    "💍 Anneau cabossé;2;0,1;Mana x 2"
};
```

---

### 3️⃣ Vérification

Ajoute un appel dans la fonction `Tests()` pour vérifier que les items sont bien enregistrés :  

```csharp
static void Tests()
{
    Console.WriteLine("=== Liste d’équipement ===");
    for (int i = 0; i < gListeEquipement.Length; i++)
    {
        Console.WriteLine($"Item brut : {gListeEquipement[i]}");
    }
}
```

---

✅ **Résultat attendu** :  
Quand tu exécutes `Tests()`, la console doit afficher la liste brute des items, par exemple :

```
=== Liste d’équipement ===
Item brut : ⚔  Épée;5; 6,5 ;Attaque +3
Item brut : 🧪 Potion de vie;4; 0,5 ;Points de vie +5
Item brut : 🥖 Ration;2;4,2;Points de vie +4
...
```
---

## Étape 3 — Implémenter les petites fonctions (*getters*)

### 🎯 Objectif

Créer des fonctions qui permettent **d’accéder aux informations d’un item** dans la liste d’équipement.  
Ces fonctions (*getters*) simplifient le code et évitent de répéter la logique de découpage (`Split`) dans tout le programme.

---

### 1️⃣ Les getters à écrire

- `ObtenirPrixEquipement(int indexItem)` → retourne le **prix** d’un item.  
- `ObtenirPoidsEquipement(int indexItem)` → retourne le **poids** d’un item.  
- `ObtenirDescriptionEquipement(int indexItem)` → retourne la **description** (nom) d’un item.  
- `ObtenirEffetEquipement(int indexItem)` → retourne l’**effet** d’un item.  

---

### 2️⃣ Instructions générales

Chaque getter doit :

1. Vérifier si l’index est valide (entre `0` et `gListeEquipement.Length - 1`)  
   - Si invalide → retourner `INVALIDE` (ou `DESC_INVALIDE` pour la description).

2. Récupérer la ligne correspondante dans `gListeEquipement`.  
   - Exemple : `string item = gListeEquipement[indexItem];`

3. Découper la chaîne en utilisant `.Split(';')`.  
   - Cela donne un tableau de sous-chaînes.  
   - Exemple : `string[] infos = item.Split(';');`

4. Retourner la bonne valeur selon la constante :  
   - `EQUIP_PRIX` → prix (convertir en `int`)  
   - `EQUIP_POIDS` → poids (convertir en `double`)  
   - `EQUIP_DESC` → description (string)  
   - `EQUIP_EFFET` → effet (string)

---

### 3️⃣ Pseudo-code : Exemple pour le prix

```pseudo
fonction ObtenirPrixEquipement(indexItem)
    si indexItem < 0 ou indexItem >= longueur(gListeEquipement)
        retourner INVALIDE

    item = gListeEquipement[indexItem]
    infos = item.Split(';')
    prixTexte = infos[EQUIP_PRIX]
    prixNombre = convertir_en_int(prixTexte)
    retourner prixNombre
fin fonction
```

---

### 4️⃣ Test rapide

Dans la fonction `Tests()`, affiche les infos de tous les items :

```csharp
static void Tests()
{
    for (int i = 0; i < gListeEquipement.Length; i++)
    {
        Console.WriteLine(
            $"{ObtenirDescriptionEquipement(i)} " +
            $"- {ObtenirPrixEquipement(i)} po " +
            $"- {ObtenirPoidsEquipement(i)} Kg " +
            $"- Effet : {ObtenirEffetEquipement(i)}"
        );
    }
}
```

---

✅ **Résultat attendu** :  
La console doit afficher une liste lisible avec description, prix, poids **et effet** pour chaque item.


---

## Étape 4 — Gérer le sac à dos

### 🎯 Objectif

Mettre en place les fonctions qui permettent de :

- 📦 Afficher le contenu du sac à dos  
- 🔍 Trouver une case libre dans le sac  
- ➕ Ajouter un item dans le sac (en tenant compte de la place et du poids)  
- ⚖️ Calculer le poids total du sac  

---

### 1️⃣ Constantes utiles

```csharp
const int VIDE = -1;     // Espace du sac vide
const int SAC_PLEIN = -1; // Sac plein
```

---

### 2️⃣ Afficher le sac à dos

But : lister les items présents, ou afficher "Aucun item" si le sac est vide.

```pseudo
fonction AfficherSacADos()
    afficher "Sac à dos :"
    mettre une variable vide = vrai
    pour chaque case du sac
        si case ≠ VIDE
            afficher description de l'item
            vide = faux
    fin pour
    si vide == vrai
        afficher "Aucun item."
fin fonction
```

---

### 3️⃣ Trouver un espace libre

```pseudo
fonction TrouverIndexEspaceLibreSacAdos()
    pour i de 0 à longueur du sac
        si sac[i] == VIDE
            retourner i
    retourner SAC_PLEIN
fin fonction
```

---

### 4️⃣ Ajouter un item au sac

But : vérifier les conditions avant d’ajouter.

1. Vérifier s’il reste une case libre avec `TrouverIndexEspaceLibreSacAdos`.  
   - Si aucune → message "Sac plein".

2. Vérifier si le poids total + poids du nouvel item ≤ force du personnage.  
   - Si trop lourd → message "Trop lourd".

3. Sinon, placer l’item dans la case libre.

```pseudo
fonction AjouterAuSacADos(indexItem)
    indexLibre = TrouverIndexEspaceLibreSacAdos()
    si indexLibre == SAC_PLEIN
        afficher "Sac plein"
        retourner faux

    si PoidsDuSac() + PoidsItem(indexItem) > force
        afficher "Item trop lourd"
        retourner faux

    sac[indexLibre] = indexItem
    afficher "Item ajouté au sac"
    retourner vrai
fin fonction
```

---

### 5️⃣ Calculer le poids du sac

```pseudo
fonction ObtenirPoidsDuSacADos()
    poidsTotal = 0
    pour i de 0 à longueur du sac
        poids = ObtenirPoidsEquipement(sac[i])
        si poids != INVALIDE
            poidsTotal += poids
    retourner poidsTotal
fin fonction
```

---

### ✅ Test rapide

Dans la fonction `Tests()`, ajoutez :

```csharp
AfficherSacADos();
Console.WriteLine($"Poids du sac : {ObtenirPoidsDuSacADos()}");
```

---

**Résultat attendu** :  
- Le programme affiche le contenu du sac.  
- Si le sac est vide → "Aucun item".  
- Lorsqu’on ajoute un item, il est listé et le poids total augmente.  
